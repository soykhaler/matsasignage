<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Oswald', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            justify-content: center;
            
        }
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px;
            flex-grow: 1;
            justify-content: center;
        }
        .grid-item {
            background-size: cover; /*100% 100% para que las imagenes tengan el mismo tamaño*/ 
            padding: 100px; 
            text-align: center;
            color: white;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em; 
            box-shadow: 0 -8px 10px rgba(0, 0, 0, 0.3);
            /* Añade sombra paralela al texto */
            text-shadow: 2px 2px rgba(0, 0, 0, 0.5);
        }
        .grid-item::before {
            content: "";
            display: block;
            padding-top: 50%; /* Reduce padding-top to make grid items smaller */
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
        }
        .navbar {
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 70px;
            background-color: #ffffff;
            
             /* Añade sombra paralela al texto */
             text-shadow: 2px 2px rgba(0, 0, 0, 0.5);
             
             box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.15);
        }
        /* Styles for the iframe and close button */
        #iframeContainer {
          display: none;
          position: fixed;
          top: 10%;
          left: 10%;
          width: 80%;
          height: 80%;
          z-index: 1000;
          background-color:white; 
          border-radius :10px;
          box-shadow :5px 5px 15px rgba(0,0,0,0.3);
          
           /* Añade sombra paralela al texto */
           text-shadow: 2px 2px rgba(0, 0, 0, 0.5);
        }
        #closeButton {
          position:absolute; 
          right :20px; 
          top :20px; 
          cursor:pointer; 
          font-size :50px; 
          color :#000000;
          background-color: white;
          
           /* Añade sombra paralela al texto */
           text-shadow: 3px 23x rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <div class="grid-container">
        <div class="grid-item" style="background-image:url('https://sandfirematsa.es/wp-content/uploads/2Feb_Matsa-3-scaled.jpg');" onclick="openIframe('https://sandfirematsa.es/sala-de-prensa/');">Noticias </div>
        <div class="grid-item" style="background-image:url('https://sandfirematsa.es/wp-content/uploads/MATSA_Julio-461-scaled.jpg');" onclick="openIframe('https://soykhaler.github.io/matsasignage/comunicados/comunicado1');">Comunicados</div>
        <div class="grid-item" style="background-image:url('https://sandfirematsa.es/wp-content/uploads/cabecera-comunidades.jpg');" onclick="openIframe('https://soykhaler.github.io/matsasignage/encuestamenus');">Encuestas</div>
        <div class="grid-item" style="background-image:url('https://sandfirematsa.es/wp-content/uploads/2022/01/operaria-sonriendo.jpg');" onclick="openIframe('https://itch.io/embed-upload/9007559?color=333333');">Juegos</div>
        <div class="grid-item" style="background-image:url('https://sandfirematsa.es/wp-content/uploads/WIFI-MATSA-4-scaled.jpg');" onclick="openIframe('https://soykhaler.github.io/matsasignage/Videos');">Vídeos</div>
        <div class="grid-item" style="background-image:url('https://www.investinspain.org/content/dam/icex-invest/img/noticias/img-sandfire.jpg');" onclick="openIframe('https://sandfirematsa.es/sala-de-prensa/galeria-multimedia/');">Galería</div>
    </div>
    <div class="navbar">
        <img src="https://sandfirematsa.es/wp-content/uploads/2022/01/logo-sandfirematsa.png" alt="Logo" style="width:auto;height:auto;max-width:346px;max-height:90px;">
    </div>
    <!-- The iframe container -->
    <div id="iframeContainer">
      <span id="closeButton" onclick="closeIframe();">&nbsp; X &nbsp;</span>
      <iframe id="iframe" style="width:100%; height:100%;"></iframe>
      <span id="homeButton" onclick="goToHomePage()">Home</span>
    </div>

    <script>
     //cambios
     // Obtener la URL de inicio correspondiente a cada página
          var noticiasURL = "https://soykhaler.github.io/matsasignage/noticias/noticia1.html";
          var encuestasURL = "https://soykhaler.github.io/matsasignage/encuestas/encuesta1.html";
          // Agrega más variables URL para otras páginas aquí...

          // Obtener el nombre de la página actual
          var currentPage = window.location.href;

          // Función para redirigir a la página de inicio correspondiente
          function goToHomePage() {
            if (currentPage.includes("noticias")) {
              window.open(noticiasURL, '_self');
            } else if (currentPage.includes("encuestas")) {
              window.open(encuestasURL, '_self');
            } else {
              // Redirigir a la página de inicio predeterminada si no se encuentra ninguna página específica
              window.open("https://soykhaler.github.io/matsasignage/index.html", '_self');
            }
          }

          // Agregar un botón de inicio dentro del iframe
          var iframe = document.getElementById('iframe');
          iframe.onload = function() {
            var iframeDocument = iframe.contentWindow.document;
            var homeButton = iframeDocument.createElement('button');
            homeButton.textContent = 'Home';
            homeButton.onclick = goToHomePage;
            homeButton.style.position = 'fixed';
            homeButton.style.bottom = '20px';
            homeButton.style.left = '50%';
            homeButton.style.transform = 'translateX(-50%)';
            homeButton.style.padding = '10px 20px';
            homeButton.style.backgroundColor = 'blue';
            homeButton.style.color = 'white';
            homeButton.style.border = 'none';
            homeButton.style.borderRadius = '5px';
            homeButton.style.cursor = 'pointer';
            iframeDocument.body.appendChild(homeButton);
          };

          // Cargar la página original en el iframe
          iframe.src = currentPage;

          


     //fin cambios 
      let timeoutId;
      const idleTime = 180000; // 1 minuto en milisegundos

      function resetTimer() {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => {
          window.location.href = 'https://soykhaler.github.io/matsasignage/Modo_Inactivo';
        }, idleTime);
      }

        function setupTimer() {
          document.addEventListener('mousemove', resetTimer);
          document.addEventListener('keydown', resetTimer);
          document.addEventListener('click', resetTimer);
          resetTimer();
        }

window.addEventListener('DOMContentLoaded', setupTimer);
      function openIframe(url) {
        document.getElementById('iframe').src = url;
        document.getElementById('iframeContainer').style.display = 'block';
      }

      function closeIframe() {
        document.getElementById('iframe').src = '';
        document.getElementById('iframeContainer').style.display = 'none';
      }
    </script>
</body>
</html>
